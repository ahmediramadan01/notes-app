"use strict";(self.webpackChunknotes_app=self.webpackChunknotes_app||[]).push([[57],{511:(e,t,n)=>{const o={notes:[],search:"",showCompleted:!1};function s(e){let t=[...o.notes];return o.showCompleted&&(t=o.notes.filter((e=>e.completed))),e&&"all"!==e?t.filter((t=>e===t.category)).filter((e=>e.title.toLowerCase().includes(o.search.toLowerCase()))):t.filter((e=>e.title.toLowerCase().includes(o.search.toLowerCase())))}function l(){localStorage.setItem("notes",JSON.stringify(o.notes))}localStorage.getItem("notes")&&(o.notes=JSON.parse(localStorage.getItem("notes")));const i=new class{#e=(()=>document.querySelector(".dialog--add"))();#t=(()=>document.querySelector(".button--open"))();#n=(()=>document.querySelector(".dialog--add__form"))();#o=(()=>document.querySelector("#description"))();#s=(()=>document.querySelector(".description-count"))();#l=(()=>document.querySelector(".button--close"))();#i=(()=>document.querySelector(".button--cancel"))();constructor(){this.#a(),this.#d(),this.#r(),this.#c()}#u(){this.#n.reset()}#m(){this.#e.showModal()}#h(){this.#e.close(),this.#u()}#a(){this.#t.addEventListener("click",this.#m.bind(this))}#d(){[this.#l,this.#i].forEach((e=>e.addEventListener("click",this.#h.bind(this))))}#r(){window.addEventListener("keydown",(e=>{"Escape"===e.key&&this.#u()}))}#c(){this.#o.addEventListener("input",(e=>{this.#s.textContent=e.target.value.length}))}addHandlerAddNote(e){this.#n.addEventListener("submit",(t=>{let n;if(t.preventDefault(),""===document.querySelector("#id").value){const e=new Date,t=`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,"0")}-${String(e.getDate()).padStart(2,"0")}`,o=[...new FormData(this.#n)];n={...Object.fromEntries(o),id:String(Date.now()),creationDate:t,completed:!1}}else{const e=[...new FormData(this.#n)];n=Object.fromEntries(e)}e(n),this.#h()}))}},a=new class{#g=(()=>document.querySelector(".form-field--search__input"))();addHandlerSearch(e){this.#g.addEventListener("input",(function(){e(this.value)}))}},d=n.p+"checkbox-icon.2dec7500107a15821767.svg",r=n.p+"checkbox-checked-icon.df3fc3c331cf561371a6.svg",c=n.p+"edit-icon.d157fbad77ad882c8ea5.svg",u=n.p+"delete-icon.d64444ed2a188f682bf9.svg",m=n.p+"no-notes-illustration.eedb0833170265276d37.svg",h=n.p+"no-search-results-illustration.866c1f67f101afde8786.svg",g=n.p+"close-icon.24b133dbc6253bea0f3e.svg",p=new class{#p;#b=(()=>document.querySelector(".notes"))();#E=(()=>document.querySelectorAll(".categories__tab"))();#f(){this.#b.innerHTML=""}#y(e){let t;return t=e?h:m,`\n    <figure class="no-notes">\n      <img\n        src="${t}"\n        alt="No notes illustration"\n        width="207px"\n        height="188px" />\n      <figcaption>${e?"No notes found":"You don't have any notes"}</figcaption>\n    </figure>\n    `}#v(){return`\n    <dialog class="dialog dialog--delete" >\n      <input style="display: none" type="text" id="deleteId" name="deleteId" />\n      <div class="dialog__header">\n        <h2 class="dialog--delete__heading">Delete note</h2>\n        <button\n          class="button button--icon button--close">\n          <img src="${g}" alt="Close icon" />\n        </button>\n      </div>\n      <p class="dialog--delete__message">\n        Are you sure you want to delete this note?\n      </p>\n      <div class="dialog__buttons">\n        <button class="button button--cancel">\n          Cancel\n        </button>\n        <button class="button button--confirm">Delete</button>\n      </div>\n    </dialog>\n    ${this.#p.map((e=>`\n        <article class="note ${e.completed?"note--completed":""}" data-id="${e.id}">\n          <div class="note__header">\n            <div class="note__category note__category--${e.category}">\n              ${e.category.slice(0,1).toUpperCase()}${e.category.slice(1)}\n            </div>\n            <ul class="note__buttons-list">\n              <li>\n                <button\n                  class="button button--icon button--checkbox"\n                  role="checkbox">\n                  <img\n                    src="${e.completed?r:d}"\n                    alt="Checkbox icon" />\n                </button>\n              </li>\n              <li>\n                <button class="button button--icon button--edit">\n                  <img src="${c}" />\n                </button>\n              </li>\n              <li>\n                <button class="button button--icon button--delete">\n                  <img\n                    src="${u}"\n                    alt="Delete icon" />\n                </button>\n              </li>\n            </ul>\n          </div>\n          <h3 class="note__title">${e.title}</h3>\n          <p class="note__description">\n            ${e.description}\n          </p>\n          <time class="note__date" datetime="${e.creationDate}">${e.creationDate.split("-").reverse().join(".")}</time>\n        </article>\n        `)).join("")}`}render(e){let t,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];!e||Array.isArray(e)&&0===e.length?t=this.#y(n):(this.#p=e,t=this.#v()),this.#f(),this.#b.insertAdjacentHTML("afterbegin",t)}addHandlerRender(e){["load","hashchange"].forEach((t=>window.addEventListener(t,(()=>{this.#E.forEach((e=>e.classList.remove("categories__tab--active")));const t=window.location.hash.slice(1);document.querySelector(`a[href='#${t||"all"}']`).classList.add("categories__tab--active"),e()}))))}},b=new class{#b=(()=>document.querySelector(".notes"))();#e=(()=>document.querySelector(".dialog--add"))();#C=(()=>document.querySelector("#id"))();#S=(()=>document.querySelector("#title"))();#_=(()=>document.querySelector("#category"))();#o=(()=>document.querySelector("#description"))();#s=(()=>document.querySelector(".description-count"))();constructor(){this.#w(),this.#q()}addHandlerToggleCompletion(e){this.#b.addEventListener("click",(t=>{const n=t.target.closest(".button--checkbox");n&&e(n.closest(".note").dataset.id)}))}#w(){this.#b.addEventListener("click",(e=>{if(!e.target.closest(".button--edit"))return;const t=e.target.closest(".note");this.#e.showModal(),this.#C.value=t.dataset.id,this.#S.value=t.querySelector(".note__title").textContent.trim(),this.#_.value=t.querySelector(".note__category").textContent.toLowerCase().trim(),this.#o.value=t.querySelector(".note__description").textContent.trim(),this.#s.textContent=this.#o.value.length}))}#q(){this.#b.addEventListener("click",(e=>{e.target.closest(".button--delete")&&(document.querySelector(".dialog--delete").showModal(),document.querySelector("#deleteId").value=e.target.closest(".note").dataset.id)}))}addHandlerDeleteNote(e){this.#b.addEventListener("click",(t=>{if(t.target.closest(".button--confirm"))e(document.querySelector("#deleteId").value);else{if(!t.target.closest(".button--close")&&!t.target.closest(".button--cancel"))return;document.querySelector(".dialog--delete").close()}}))}},E=new class{#D=(()=>document.querySelector(".button--show-completed"))();addHandlerShow(e){this.#D.addEventListener("click",(()=>{this.#D.classList.contains("button--checked")?(this.#D.classList.remove("button--checked"),this.#D.querySelector("img").src=d):(this.#D.classList.add("button--checked"),this.#D.querySelector("img").src=r),e()}))}};function f(){const e=window.location.hash.slice(1);o.search?p.render(s(e),!0):p.render(s(e))}i.addHandlerAddNote((function(e){o.notes.some((t=>t.id===e.id))?function(e){const t=o.notes.findIndex((t=>e.id===t.id));o.notes[t]={...o.notes[t],...e},l()}(e):function(e){o.notes.push(e),l()}(e),f()})),p.addHandlerRender(f),a.addHandlerSearch((function(e){o.search=e,f()})),b.addHandlerToggleCompletion((function(e){!function(e){const t=o.notes.findIndex((t=>t.id===e));o.notes[t].completed=!o.notes[t].completed,l()}(e),f()})),b.addHandlerDeleteNote((function(e){!function(e){const t=o.notes.findIndex((t=>t.id===e));o.notes.splice(t,1),l()}(e),f()})),E.addHandlerShow((function(){o.showCompleted=!o.showCompleted,f()}))}},e=>{e(e.s=511)}]);
//# sourceMappingURL=index.3018e29ef09874d461aa.js.map